<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta name="_csrf" th:content="${_csrf.token}"/>
<!-- default header name is X-CSRF-TOKEN -->
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
  <style>
  body {
    font-family: "Lato", sans-serif;
  }
</style>
<link rel="stylesheet" type="text/css" href="/assets/css/sidebar.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <!-- jQuery library -->
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<body>


 <div th:replace="UIFragment/baseNavigation::admin-sidebar"></div>

  <header th:replace="UIFragment/baseNavigation::header"></header>

	<div class="container p-3 " style="">
		<h2>
			Manage Admin <a href="#" style="color: green"><i
				class="fa fa-table"></i></a> <a href="" style="color: green"><i
				class="fas fa-redo-alt" style="float: right; font-size: 0.73em"></i></a>
		</h2>
		<hr>
		<br>

		<div class="container">
			<div class="row">
				<div class="col-6">
				<h3>
				<a href="#" > My Profile</a>
				</h3>
					<hr>
								
					<div class="row text-center ">
						<div class="col text-center">

							<input type="text" placeholder="username" th:value="${user.userName}" name="userName" id="emailId" class="form-control"
								disabled>
						</div>
						<div class="col-2 text-right">
							<i id="emailEdit" class="fas fa-user "></i><br>
						</div>
					</div>
					<br>
					<div class="row text-center ">
						<div class="col text-center">
								<div class="input-group mb-3">
									<input type="password"  th:value="${user.password}" class="form-control"
										placeholder="password"
									id="password"  disabled>
									<div class="input-group-append">
										<span class="input-group-text" id="toggle-password" style="cursor:pointer">View</span>
									</div>
								</div>
								
							</div>
						<div class="col-2 text-right">
							<i id="passwordEdit" class="fas fa-user-edit "
								style="cursor: pointer"></i><br>
						</div>
					</div>
					<br>
					<div class="row text-center " id="Submit">
									<div class="col text-center" style="background-color:;">
										<button type="button" class="btn btn-primary" id="save">Save</button>
									</div>
									
								</div>
					<hr>
				</div>

	

				<div class="col">
					<h3 align="center">
						<a href="#" onclick="addAdmin()"> New Admin</a>
								</h3>
								<hr>


								<div class="row text-center " id="emailId">
									
									<div class="col text-right" style="background-color:;">
										<input type="email" id="username" placeholder="email" class="form-control"><br>
									</div>

								</div>



								<div class="row text-center " id="Submit">
									<div class="col text-center" style="background-color:;">
										<button type="button" class="btn btn-primary" id="submit">Submit</button>
										<br>
										<hr>
										<br>

									</div>

								</div>
				</div>
			</div>
		</div>
	</div>




	<br>
				<div th:insert="~{UIFragment/modal.html}"></div>

				<th:block th:replace="UIFragment/baseNavigation::navigateScript"></th:block>
				
				<script src="/assets/js/ajaxutils/headerInclusion.js"></script>
				
				<script type="text/javascript"> 
				
				</script>
                  <script>

                  $(function(){

                	$('#toggle-password').click(function(){
                		
                		if($('#password').attr('type')=="password"){
                			$('#password').attr('type','text');
                		}else{
                			$('#password').attr('type','password');
                		}
                	});
					

                    $("#passwordEdit").click(function(ev){

                        $("#password").removeAttr('disabled');


                      });

                      
                      $('#save').click(function() {
                    	  var json = {username:$('#emailId').val(),password:$('#password').val()};
                    	  var jsonString = JSON.stringify(json);
                    	  
                    	  $.ajax({
      						type:"post",
      						url:"/admin/update",
      						data:jsonString,
      						processData:false,
      						contentType: 'application/json; charset=utf-8',
      						success:function(response) {
      							if (!response) {
      								$('.modal-title').text("Message!");
      								$('.modal-body').text("error saving changes");
      								$('#ModalCenter').modal('show');
      							}else{
      								location.reload(true);      							}
      							
      						}
      					});
                      });

                  });
                  $(document).on('click', '#click', function () {

                    alert("defvs");


                  });
                  
                  $('#submit').click(function() {
                	  if($('#username').val()=='') return;
                	  
                	  $.ajax({
              			type:"post",
              			url:"/admin/new",
              			processData:false,
              			contentType: "text/plain",
              			data:$('#username').val(),
              			success:function(response){
              				$('.modal-title').text("Message!");
								$('.modal-body').text(response);
								$('#ModalCenter').modal('show');
              				
              			}
              		});
                  });

                  function addAdmin()
                  {

                    $("#emailId").show();
                    $("#password").show();
                    $("#department").show();
                    $("#Submit").show();


                    $("#emailId1").hide();
                    $("#delete").hide();

					

                  }
                  function deleteAdmin()
                  {
                    $("#emailId1").show();
                    $("#delete").show();


                    $("#emailId").hide();
                    $("#password").hide();
                    $("#Submit").hide();


                  }

                  </script>
                </body>
                </html>
